<div class="page-container">
  <!-- Left Sidebar - Filters -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h2>Filters</h2>
      @if (activeFiltersCount() > 0) {
        <button class="btn-clear-filters" (click)="clearFilters()">
          <span>‚úï Wis alle filters</span>
        </button>
      }
    </div>

    <!-- Search -->
    <div class="filter-group">
      <label class="filter-label">Zoeken</label>
      <input
        type="text"
        class="filter-input"
        placeholder="Zoek op naam..."
        [ngModel]="searchTerm()"
        (ngModelChange)="searchTerm.set($event); onSearchChange()"
      />
    </div>

    <!-- Credit Filter -->
    <div class="filter-group">
      <label class="filter-label">Studiepunten</label>
      <select
        class="filter-select"
        [ngModel]="selectedCredit()"
        (ngModelChange)="selectedCredit.set($event); onFilterChange()"
      >
        <option [ngValue]="undefined">Alle</option>
        @for (credit of availableCredits; track credit) {
          <option [ngValue]="credit">{{ credit }} EC</option>
        }
      </select>
    </div>

    <!-- Level Filter -->
    <div class="filter-group">
      <label class="filter-label">Niveau</label>
      <select
        class="filter-select"
        [ngModel]="selectedLevel()"
        (ngModelChange)="selectedLevel.set($event); onFilterChange()"
      >
        <option value="">Alle niveaus</option>
        @for (level of availableLevels; track level) {
          <option [value]="level">{{ level }}</option>
        }
      </select>
    </div>

    <!-- Location Filter -->
    <div class="filter-group">
      <label class="filter-label">Locatie</label>
      <select
        class="filter-select"
        [ngModel]="selectedLocation()"
        (ngModelChange)="selectedLocation.set($event); onFilterChange()"
      >
        <option value="">Alle locaties</option>
        @for (location of availableLocations(); track location) {
          <option [value]="location">{{ location }}</option>
        }
      </select>
    </div>

    <!-- Favorite Summary -->
    @if (favoriteCount() > 0) {
      <div class="favorite-summary">
        <div class="favorite-icon">‚≠ê</div>
        <div class="favorite-text">
          <strong>{{ favoriteCount() }}</strong> favoriet{{ favoriteCount() !== 1 ? 'en' : '' }}
        </div>
      </div>
    }

    <!-- Logout Button -->
    <button 
      class="btn-logout" 
      (click)="logout()"
      style="width: 100%; margin-top: 20px; padding: 12px; background: #e74c3c; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;"
    >
      üö™ Uitloggen
    </button>
  </aside>

  <!-- Main Content - Module Cards -->
  <main class="main-content">
    <div class="content-header">
      <div>
        <h1>üìö Module Overzicht</h1>
        <p class="subtitle">{{ getResultText() }}</p>
      </div>
    </div>

    <!-- Loading State -->
    @if (isLoading()) {
      <div class="loading">
        <div class="spinner"></div>
        <p>Modules laden...</p>
      </div>
    }

    <!-- No Results -->
    @else if (filteredModules().length === 0) {
      <div class="no-results">
        <div class="no-results-icon">üîç</div>
        <h3>Geen modules gevonden</h3>
        <p>Probeer andere filters of wis de huidige filters.</p>
        @if (activeFiltersCount() > 0) {
          <button class="btn-clear-large" (click)="clearFilters()">
            Alle filters wissen
          </button>
        }
      </div>
    }

    <!-- Module Cards -->
    @else {
      <div class="cards-container">
        @for (module of filteredModules(); track module.id) {
          <div class="module-card">
            <!-- Favorite Button -->
            <button
              class="card-favorite-btn"
              [class.is-favorite]="isFavorite(module.id)"
              (click)="toggleFavorite($event, module.id)"
              [title]="isFavorite(module.id) ? 'Verwijder van favorieten' : 'Toevoegen aan favorieten'"
            >
              {{ isFavorite(module.id) ? '‚≠ê' : '‚òÜ' }}
            </button>

            <!-- Card Content -->
            <div class="card-header">
              <h3 class="card-title">{{ module.name }}</h3>
              <div class="card-badges">
                <span class="badge badge-credit">{{ module.studyCredit }} EC</span>
                <span class="badge badge-level" [ngClass]="getLevelBadgeClass(module.level)">
                  {{ module.level }}
                </span>
              </div>
            </div>

            <p class="card-description">{{ module.shortDescription }}</p>

            <div class="card-footer">
              <div class="card-location">
                <span class="location-icon">üìç</span>
                <span>{{ module.location }}</span>
              </div>
            </div>
          </div>
        }
      </div>
    }
  </main>
</div>